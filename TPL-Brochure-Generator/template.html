<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tiny Prism Labs - Capability Deck</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
   href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
   rel="stylesheet"
  />
  <style>
   body {
    font-family: "Inter", sans-serif;
    background-color: #f0f2f5;
   }
   @page {
    size: A4;
    margin: 0;
   }
   .page {
    background: white;
    display: flex;
    flex-direction: column;
    margin: 0 auto 0.5cm;
    box-shadow: 0 0 0.5cm rgba(0, 0, 0, 0.5);
    width: 210mm;
    height: 296mm;
    padding: 15mm;
    box-sizing: border-box;
    overflow: hidden;
   }
   @media print {
    body {
     background-color: #fff;
     margin: 0;
    }
    .page {
     margin: 0;
     box-shadow: none;
     page-break-after: always;
    }
    .page:last-child {
     page-break-after: auto;
    }
    .screen-only {
     display: none;
    }
   }
   /* Center logo even if PNG has whitespace */
   #company-logo {
    display: block;
    margin: 0 auto;
    object-fit: contain;
    transform: translateY(4px);
   }

   
  </style>
 </head>
 <body>
<div class="sr-only">
  <span class="text-cyan-500 text-teal-500 text-blue-500 text-purple-500 text-orange-500 text-red-500 text-green-500 text-pink-500 text-yellow-500 text-indigo-500"></span>

  <span class="border-cyan-500 border-teal-500 border-blue-500 border-purple-500 border-orange-500 border-red-500 border-green-500 border-pink-500 border-yellow-500 border-indigo-500"></span>

  <span class="w-11 h-11 mr-6"></span>
  <span class="w-8 h-8 mr-4"></span>
  <span class="w-4 h-4 mr-2"></span>
</div>

  <div
   class="screen-only container mx-auto p-4 text-center bg-yellow-100 text-yellow-800 border border-yellow-300 rounded-lg my-8"
  >
   <h2 class="font-bold">PDF INSTRUCTIONS</h2>
   <p>Press Ctrl/Cmd+P → Save as PDF → A4 → Margins None/Default.</p>
  </div>

  <div id="pages"></div>

  <script>
   // ---- Inline-SVG icon hydrator (so we can color with Tailwind) ----
   const svgCache = new Map();
   async function inlineIcon(url, classes) {
    if (!svgCache.has(url)) {
     const res = await fetch(url);
     const txt = await res.text();
     svgCache.set(url, txt);
    }
    const wrap = document.createElement("div");
    wrap.innerHTML = svgCache.get(url).trim();
    const svg = wrap.querySelector("svg");
    if (!svg) return document.createTextNode("");
    svg.removeAttribute("width");
    svg.removeAttribute("height");
    svg.setAttribute("stroke", "currentColor"); // Lucide uses stroke
    svg.setAttribute("class", classes);
    svg.setAttribute("aria-hidden", "true");
    svg.setAttribute("focusable", "false");
    return svg;
   }
   async function hydrateIcons(root = document) {
    const nodes = root.querySelectorAll("[data-icon]");
    await Promise.all(
     [...nodes].map(async (el) => {
      const url = el.getAttribute("data-icon");
      const size = el.getAttribute("data-size") || "w-5 h-5";
      const color = el.getAttribute("data-color") || "";
      const extra = el.getAttribute("data-extra") || ""; // e.g., mr-3
      const svg = await inlineIcon(url, `${size} ${color} ${extra}`.trim());
      el.replaceWith(svg);
     })
    );
   }
   // ------------------------------------------------------------------

   fetch("content.json")
    .then((res) => res.json())
    .then(async (data) => {
     const pagesContainer = document.getElementById("pages");
     let currentPage = 1;
     const totalPages =
       data.services.length + data.caseStudies.length + 1;

     const footerHtml = () => `
          <footer class="pt-3 border-t border-gray-200">
            <div class="flex justify-between items-center text-xs text-gray-500">
              <div class="flex items-center">
                <span data-icon="${
                 data.contact.emailIcon
                }" data-size="w-4 h-4" data-color="text-gray-500" data-extra="mr-2"></span>
                <span>${data.contact.email}</span>
              </div>
              <span>Page ${currentPage++} of ${totalPages}</span>
            </div>
          </footer>
        `;

     // Page 1 - Title
     pagesContainer.innerHTML += `
          <div class="page flex justify-center items-center text-center">
            <div>
              <img src="${data.company.logo}" id="company-logo" class="h-28 w-28 rounded-full mb-6 border-4 border-cyan-500 p-1" alt="Logo"/>
              <h1 class="text-6xl font-bold text-gray-900">${data.company.name}</h1>
              <p class="text-2xl text-cyan-600 mt-3">${data.company.tagline}</p>
            </div>
          </div>
        `;

     // Page 2 - Offerings
     pagesContainer.innerHTML += `
          <div class="page flex flex-col">
            <header class="pb-3 border-b border-gray-200">
              <h3 class="text-sm font-semibold text-gray-600">${
               data.company.name
              }</h3>
            </header>
            <main class="flex-grow py-12">
              <div class="text-center mb-10">
                <h2 class="text-4xl font-bold text-gray-900">${
                 data.offeringsSection.title
                }</h2>
                <p class="text-xl text-gray-600 mt-3">${
                 data.offeringsSection.subtitle
                }</p>
              </div>
              <div class="space-y-6 text-left">
                ${data.offeringsSection.items
                 .map(
                  (item) => `
                  <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                    <h3 class="font-bold text-xl text-gray-800 mb-2">${item.title}</h3>
                    <p class="text-base text-gray-600">${item.description}</p>
                  </div>
                `
                 )
                 .join("")}
              </div>
            </main>
            ${footerHtml()}
          </div>
        `;

    

     // Service pages
     data.services.forEach((service) => {
      pagesContainer.innerHTML += `
            <div class="page flex flex-col">
              <header class="pb-3 border-b border-gray-200">
                <h3 class="text-sm font-semibold text-gray-600">${
                 data.company.name
                }</h3>
              </header>
              <main class="flex-grow pt-12">
                <div class="w-full mb-10">
                  <h2 class="text-4xl font-bold text-gray-900">${
                   service.title
                  }</h2>
                  <p class="text-xl text-gray-600 mt-2">${service.subtitle}</p>
                </div>
                <div class="grid grid-cols-2 gap-x-8 gap-y-6 text-base text-gray-700">
                  ${service.points
                   .map(
                    (p) => `
                    <div class="flex items-start ${
                     p.fullWidth ? "col-span-2" : ""
                    }">
                      <span data-icon="${
                       p.icon
                      }" data-size="w-11 h-11" data-color="${
                     p.iconColor || 'text-cyan-500'
                    }" data-extra="mr-6"></span>
                      <span>${p.text}</span>
                    </div>
                  `
                   )
                   .join("")}
                </div>
              </main>
              ${footerHtml()}
            </div>
          `;
     });
 
     // Case Studies
     data.caseStudies.forEach((cs) => {
      pagesContainer.innerHTML += `
            <div class="page flex flex-col">
              <header class="pb-3 border-b border-gray-200">
                <h3 class="text-sm font-semibold text-gray-600">${
                 data.company.name
                }</h3>
              </header>
              <main class="flex-grow pt-8">
                <span class="text-sm font-semibold text-${
                 cs.color
                }-600 uppercase">${cs.tag}</span>
                <h3 class="text-3xl font-bold text-gray-900 mt-2 mb-8">${
                 cs.title
                }</h3>
                <div class="space-y-6">
                  <div>
                    <h4 class="text-lg font-semibold text-gray-900 mb-2 border-l-4 border-${
                     cs.color
                    }-500 pl-4">The Challenge</h4>
                    <p class="text-base text-gray-700">${cs.challenge}</p>
                  </div>
                  <div>
                    <h4 class="text-lg font-semibold text-gray-900 mb-2 border-l-4 border-${
                     cs.color
                    }-500 pl-4">Strategic Solution</h4>
                    <p class="text-base text-gray-700">${cs.solution}</p>
                  </div>
                </div>
                <div class="mt-8 bg-gray-100 p-6 rounded-lg">
                  <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-900 mb-4">Core Outcomes</h4>
                    <ul class="space-y-4 text-sm">
                      ${cs.outcomes
                       .map(
                        (o) => `
                        <li class="flex items-center">
                          <span data-icon="${o.icon}" data-size="w-5 h-5" data-color="text-green-500" data-extra="mr-3"></span>
                          <span>${o.text}</span>
                        </li>
                      `
                       )
                       .join("")}
                    </ul>
                  </div>
                  <div>
                    <h4 class="text-lg font-semibold text-gray-900 mb-4">Technology Stack</h4>
                    <ul class="space-y-4 text-sm">
                      ${cs.stack
                       .map(
                        (s) => `
                        <li class="flex items-center">
                          <span data-icon="${s.icon}" data-size="w-5 h-5" data-color="text-${cs.color}-500" data-extra="mr-3"></span>
                          <span>${s.text}</span>
                        </li>
                      `
                       )
                       .join("")}
                    </ul>
                  </div>
                </div>
              </main>
              ${footerHtml()}
            </div>
          `;
     });

     // Thank You
     pagesContainer.innerHTML += `
          <div class="page flex justify-center items-center text-center">
            <div class="w-full">
              <h2 class="text-5xl font-bold text-gray-900 mt-8">${
               data.thankYou.title
              }</h2>
              <p class="text-xl text-gray-600 mt-4 max-w-md mx-auto">${
               data.thankYou.subtitle
              }</p>
              <div class="mt-12 border-t border-gray-200 pt-8">
                <div class="inline-flex flex-col items-start space-y-6 text-gray-700">
                  ${data.thankYou.contact
                   .map(
                    (c) => `
                    <div class="flex items-center text-lg">
                      <span data-icon="${c.icon}" data-size="w-8 h-8" data-color="text-cyan-600" data-extra="mr-4"></span>
                      <span>${c.text}</span>
                    </div>
                  `
                   )
                   .join("")}
                </div>
              </div>
            </div>
          </div>
        `;

     // After injecting all pages, hydrate icons
     await hydrateIcons(document);
    });
  </script>
 </body>
</html>
